<!DOCTYPE html>
<link rel="stylesheet" href="/_packages/document.css" />
<script src="/_packages/document.js"></script>
<script src="tb.js"></script>
<header>
	<h1>WebRTC</h1>
</header>
<blockquote>
	This highlights a little script i wrote to help *maybe* working with WebRTC's PeerConnection.
</blockquote>
<div class="demo">
	<video id="myvideo"></video>
</div>
<aside>Share chatroom link <a id="chat-room-link" target="_blank"></a></aside>
<style>
	.demo{
		border:1px solid #ccc;
		/* display content vertically, with flex box */
		display: -webkit-box; 
		-webkit-box-align: center;
		display: -moz-box; 
		-moz-box-align: center;
		display: -ms-box; 
		-ms-box-align: center;
		display: box; 
		box-align: center;
	}
	.demo video{
		-webkit-box-flex:1.0;
		-moz-box-flex:1.0;
		box-flex:2.0;
		border:1px solid #eee;
		display: block;
		padding:3px;
		max-height:200px;
	}
</style>
<p>Create the controlled for the local video tag</p>
<script class="pre">

// Get a unique chat room identification
window.location.hash = (window.location.hash || parseInt(Math.random()*1e5,16).toString(16));

// 
var session = TB.initSession().addMedia('myvideo').connect(window.location.hash).on('media', function(e){
	document.querySelector('div.demo').appendChild(e.video);
});

// Update chat room share link
document.getElementById('chat-room-link').innerHTML = window.location.href;
document.getElementById('chat-room-link').href = window.location.href;

</script>
<p>Add events</p>
